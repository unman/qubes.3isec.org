<html><body>
<h1>Qubes templates</h1>

All templates are signed with my Qubes OS Signing key:
<code>
pub   4096R/C8C0C2EF 2016-06-25
      Key fingerprint = 4B1F 400D F256 51B5 3C41  41B3 8B3F 30F9 C8C0 C2EF
uid                  unman (Qubes OS signing key) <unman@thirdeyesecurity.org>
sub   4096R/4731B36C 2016-06-27 [expires: 2022-06-30]
</code>

<br>
You can read about how to get a copy of the key, and how to validate it <a href="./index.html">here</a>.
<br>
You will need to copy the key in to dom0:
<br>
<code>
qvm-run -p  <qube> 'cat <path to key> ' > unman.pub
</code>
<br>
and then import it:
<code>
sudo rpm --import unman.pub
</code>
<p>
Download the template you want to use, and copy it into dom0:
<br>
<code>
qvm-run -p  <qube> 'cat <path to downloaded template> ' > <template_package_name>
</code>
<br>
replacing <pre><template_package_name></pre> with a name of your choice.
<br>
Then check the signature by (e.g):
<br>
<code>
rpm -K template_package_name
</code>
<br>
<p>

Templates like Parrot or Kali are based on Debian testing.
<br>
To avoid breakage when updating, the core Qubes packages are on hold. 
<b>This means that they will not be updated.</b>
You can confirm this by running <code>apt-mark showhold</code> in the template.
<br>
<code>apt-mark unhold </code> will remove the hold, and allow you to update the Qubes packages.
<br>
I suggest you restore the hold <code>apt-mark hold </code> to make sure that the Qubes packages are not removed when updating other packages.
<br>
<br>
So, while updating a template you will see that some packages cannot be upgraded because they will conflict with the Qubes packages.
<br>
Periodically, in the template, remove the hold on the Qubes packages. Update the package list with <code>apt update</code>  and then update the Qubes packages - either manually with <code>apt install... </code>, or using a manager like aptitude, and selecting Qubes packages for upgrade.
<br>
Once the upgrade has been completed, put the Qubes packages back on hold, and upgrade again.
<p>
Undoubtedly a pain, but less than the pain of breaking your qubes, and having to crawl backwards to get them working again.
<br>
Then again, if you use aptitude you would be able to see what changes would be made, opt to retain the Qubes packages - <b> always keep the Qubes packages</b>, and avoid breakage that way.
This depends on you looking to see what changes will be made and acting accordingly.
Using  <code>apt-mark hold </code> will take some pressure off.
<p>
unman
	
</body></html>
